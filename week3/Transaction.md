# 트랜잭션(Transaction)
작성자: 장수현
```
데이터베이스의 상태를 변환시키는 하나의 논리적인 작업 단위를 구성하는 연산들의 집합
```

<br>

## 트랜잭션의 특성 (ACID)
**원자성(Atomicity)**

트랜잭션의 모든 연산이 정상적으로 수행 완료되어 모두 DB에 저장되거나 어떠한 연산도 수행되지 않아 DB에 전혀 반영되지 않아야 한다

**일관성(Consistency)**

트랜잭션이 완료된 다음의 상태에서도 트랜잭션이 일어나기 전의 상황과 동일하게 데이터의 일관성을 보장해야 한다

**독립성(Isolation)**

둘 이상의 트랜잭션이 동시에 병행 실행되고 있을 때, 어떤 트랜잭션도 다른 트랜잭션 연산에 끼어들 수 없다. 즉, 각각의 트랜잭션은 서로 간섭없이 독립적으로 수행되어야 한다

**지속성(Durability)**

트랜잭션이 정상적으로 완료된 다음에는 영구적으로 DB에 작업의 결과가 저장되어야 한다

<br>

## 트랜잭션 격리 수준 (Isolation Level)
트랜잭션에서 일관성이 없는 데이터를 허용하도록 하는 수준

<br>

**[ 격리 수준의 필요성 ]**

데이터베이스는 ACID트랜잭션이 원자적이면서도 독립적인 수행을 하도록 한다.
트랜잭션은 Locking을 통해 트랜잭션이 DB를 다루는 동안 다른 트랜잭션이 관여하지 못하게 막는다. 하지만 무조건적인 Locking으로 동시에 수행되는 많은 트랜잭션들을 순서대로 처리하는 방식으로 구현되면 DB의 성능은 떨어지게 된다. 반대로 응답성을 높이기 위해 Locking 범위를 줄인다면 잘못된 값이 처리될 여지가 있다.그래서 최대한 효율적인 Locking 방법이 필요하다.

<br>

**[ 격리 수준의 종류 ]**

1. Read Uncommitted (레벨 0)
- SELECT 문장이 수행되는 동안 해당 데이터에 Shared Lock이 걸리지 않는 Level
- 트랜잭션에 처리중인 혹은 아직 커밋되지 않은 데이터를 다른 트랜잭션이 읽는 것을 허용한다
2. Read Committed (레벨 1)
- SELECT 문장이 수행되는 동안 해당 데이터에 Shared Lock이 걸리는 Level
- 트랜잭션이 수행되는 동안 다른 트랜잭션이 접근할 수 없어 대기하게 된다. Commit이 이루어진 트랜잭션만 조회할 수 있다
3. Repeatable Read (레벨 2)
- 트랜잭션이 완료될 때까지 SELECT 문장이 사용하는 모든 데이터에 Shared Lock이 걸리는 Level
- 트랜잭션이 범위 내에서 조회한 데이터의 내용이 항상 동일함을 보장한다. 따라서, 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정이 불가능하다.
4. Serializable (레벨 3)
- 트랜잭션이 완료될 때까지 SELECT 문장이 사용하는 모든 데이터에 Shared Lock이 걸리는 Level
- 완벽한 읽기 일관성 모드를 제공한다. 따라서, 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정 및 입력이 불가능하다.