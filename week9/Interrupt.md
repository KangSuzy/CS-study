# Interrupt, System Call
작성자: 김다인

---

## 인터럽트
CPU가 프로그램 실행 중 입출력 하드웨어 등의 장치에 **예외 상황이 발생해 현재 작업을 즉시 중단하고 발생된 상황에 대한 우선 처리가 필요한 경우, CPU에 알려 처리할 수 있도록 하는 것**이다.  
폴링 방식이 CPU가 상태 파악을 위해 장치 레지스터를 주기적으로 읽어 대상을 계속 감시해 상황이 발생하면 처리 루틴을 실행해 처리한다면, 인터럽트는 CPU에게 일을 처리해달라고 요청하는 수단이다. 이처럼 인터럽트는 발생 시기를 예측하기 힘든 경우 컨트롤러가 가장 빠르게 대응할 수 있는 방법이다.  
CPU는 인터럽트를 감지하면 **실행 중인 기계어 코드를 중단하고 인터럽트를 위한 처리 프로그램으로 넘어가서 해당 일을 수행**한다. 인터럽트 처리를 위한 루틴을 인터럽트 서비스 루틴(Interrupt Service Routine, ISR)이라고 한다.  
**하드웨어 인터럽트**는 각종 하드웨어 장치들이 CPU에게 서비스를 받아야 하는 경우 발생하며, 인터럽트 라인을 통해 CPU에게 전달된다.  
CPU 외부에서 인터럽트를 거는 경우가 일반적이지만 **내부**에서 걸리는 경우도 있다. 0으로 나누거나 하는 경우의 예외(exception)에는 예외 처리를 한다.  
사실, 인터럽트도 예외 처리의 한 종류이다. 하지만 인터럽트가 에러를 의미하는 것은 아니다.  

### 시스템 콜
**인터럽트가 소프트웨어적으로 발생**하는 경우도 있는데, 이 경우에는 **기계어 명령어 수행에 의해 발생**된다. 
운영 체제에서 운영 프로그램의 저수준 입출력 함수가 실행되면 해당 실시간 라이브러리 함수에 의해 소프트웨어 인터럽트가 발생한다. 혹은 **사용자가 프로그램을 실행**시키거나 **소프트웨어 이용 중 다른 프로세스를 실행**시키는 경우 인터럽트가 발생하는데, 이것을 시스템 콜(system call)이라고 부른다. 함수 기능에 따라 드라이버를 구별하고, 드라이버 내의 함수를 지정하면서 레지스러를 통해 데이터를 넘겨준다.  
시스템 콜은 운영체제의 커널이 제공하는 서비스에 대해 **응용 프로그램의 요청에 따라 커널에 접근하기 위한 인터페이스**를 뜻하기도 한다. 고급 언어(C++ 등)로 작성된 프로그램들은 직접 시스템 호출을 할 수 없기 때문에 **고급 API를 통해 시스템 콜에 접근**하게 하는 것이다. 한마디로, *응용 프로그램에서 커널 서비스를 사용하는 방법이 시스템 호출*이다.  
입력된 명령을 수행하는 과정에서 새로운 프로세스를 시작하려면 시스템 호출을 해야 한다. 예를 들어 유닉스 시스템에서는 새로운 프로세스 시작을 위해 exec 시스템 호출 후 fork 시스템 호출이 뒤따른다.  

---
* [위키백과 : 인터럽트](https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8)
* [위키백과 : 시스템 호출](https://ko.wikipedia.org/wiki/%EC%8B%9C%EC%8A%A4%ED%85%9C_%ED%98%B8%EC%B6%9C)
* [인터럽트(Interrupt)](https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Operating%20System/Interrupt.md)